{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Fido\\\\Documents\\\\GitHub\\\\UI-Design-React\\\\app\\\\screens\\\\Login\\\\index.tsx\";\nimport * as React from \"react\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { Layout } from \"./layout\";\nimport { useLogin } from \"./hooks/useLogin\";\nimport { useAuth } from \"../../hooks/useAuth\";\nimport { useSetNavigationOptions } from \"../../hooks/useSetNavigationOptions\";\nexport var Login = function Login() {\n  var navigation = useNavigation();\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      error = _React$useState4[0],\n      setError = _React$useState4[1];\n\n  var _React$useState5 = React.useState(\"\"),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      errorMessage = _React$useState6[0],\n      setErrorMessage = _React$useState6[1];\n\n  var _useLogin = useLogin(),\n      state = _useLogin.state,\n      handleChange = _useLogin.handleChange,\n      handleSubmit = _useLogin.handleSubmit;\n\n  var _useAuth = useAuth(),\n      setToken = _useAuth.setToken;\n\n  useSetNavigationOptions(\"Login\");\n\n  var handlePressSubmit = function handlePressSubmit() {\n    var data, _data$login$user;\n\n    return _regeneratorRuntime.async(function handlePressSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            setLoading(true);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(handleSubmit());\n\n          case 4:\n            data = _context.sent;\n\n            if (data.login.ok) {\n              setToken((_data$login$user = data.login.user) == null ? void 0 : _data$login$user.token);\n            } else {\n              setErrorMessage(data.login.error);\n              setError(!data.login.ok);\n            }\n\n            setLoading(false);\n            _context.next = 13;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](0);\n            setErrorMessage(\"Oh snap! You got an error!\" + \" \" + _context.t0);\n            setError(true);\n\n          case 13:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  return React.createElement(Layout, {\n    loading: loading,\n    errorMessage: errorMessage,\n    error: error,\n    state: state,\n    handleChange: handleChange,\n    navigation: navigation,\n    handlePressSubmit: handlePressSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 10\n    }\n  });\n};","map":{"version":3,"sources":["C:/Users/Fido/Documents/GitHub/UI-Design-React/app/screens/Login/index.tsx"],"names":["React","useNavigation","Layout","useLogin","useAuth","useSetNavigationOptions","Login","navigation","useState","loading","setLoading","error","setError","errorMessage","setErrorMessage","state","handleChange","handleSubmit","setToken","handlePressSubmit","data","login","ok","user","token"],"mappings":";;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,aAAT,QAA8B,0BAA9B;AACA,SAASC,MAAT;AACA,SAASC,QAAT;AACA,SAASC,OAAT;AACA,SAASC,uBAAT;AAEA,OAAO,IAAMC,KAAK,GAAG,SAARA,KAAQ,GAAM;AACvB,MAAMC,UAAU,GAAGN,aAAa,EAAhC;;AADuB,wBAEOD,KAAK,CAACQ,QAAN,CAAe,KAAf,CAFP;AAAA;AAAA,MAEhBC,OAFgB;AAAA,MAEPC,UAFO;;AAAA,yBAGGV,KAAK,CAACQ,QAAN,CAAe,KAAf,CAHH;AAAA;AAAA,MAGhBG,KAHgB;AAAA,MAGTC,QAHS;;AAAA,yBAIiBZ,KAAK,CAACQ,QAAN,CAAe,EAAf,CAJjB;AAAA;AAAA,MAIhBK,YAJgB;AAAA,MAIFC,eAJE;;AAAA,kBAKuBX,QAAQ,EAL/B;AAAA,MAKfY,KALe,aAKfA,KALe;AAAA,MAKRC,YALQ,aAKRA,YALQ;AAAA,MAKMC,YALN,aAKMA,YALN;;AAAA,iBAMFb,OAAO,EANL;AAAA,MAMfc,QANe,YAMfA,QANe;;AAOvBb,EAAAA,uBAAuB,CAAC,OAAD,CAAvB;;AAEA,MAAMc,iBAAiB,GAAG,SAApBA,iBAAoB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtBT,YAAAA,UAAU,CAAC,IAAD,CAAV;AAFsB;AAAA,6CAIHO,YAAY,EAJT;;AAAA;AAIhBG,YAAAA,IAJgB;;AAKtB,gBAAGA,IAAI,CAACC,KAAL,CAAWC,EAAd,EAAiB;AACjBJ,cAAAA,QAAQ,qBAACE,IAAI,CAACC,KAAL,CAAWE,IAAZ,qBAAC,iBAAiBC,KAAlB,CAAR;AAEC,aAHD,MAIK;AACLV,cAAAA,eAAe,CAACM,IAAI,CAACC,KAAL,CAAWV,KAAZ,CAAf;AACAC,cAAAA,QAAQ,CAAC,CAACQ,IAAI,CAACC,KAAL,CAAWC,EAAb,CAAR;AACC;;AAEDZ,YAAAA,UAAU,CAAC,KAAD,CAAV;AAdsB;AAAA;;AAAA;AAAA;AAAA;AAiBtBI,YAAAA,eAAe,CAAC,+BAA+B,GAA/B,cAAD,CAAf;AACAF,YAAAA,QAAQ,CAAC,IAAD,CAAR;;AAlBsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA1B;;AAsBF,SAAO,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEH,OAAjB;AAA0B,IAAA,YAAY,EAAEI,YAAxC;AAAsD,IAAA,KAAK,EAAEF,KAA7D;AAAoE,IAAA,KAAK,EAAEI,KAA3E;AAAkF,IAAA,YAAY,EAAEC,YAAhG;AAA8G,IAAA,UAAU,EAAET,UAA1H;AAAsI,IAAA,iBAAiB,EAAEY,iBAAzJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACD,CAhCM","sourcesContent":["import * as React from \"react\";\r\nimport { useNavigation } from \"@react-navigation/native\";\r\nimport { Layout } from './layout';\r\nimport { useLogin } from \"./hooks/useLogin\";\r\nimport { useAuth } from \"../../hooks/useAuth\";\r\nimport { useSetNavigationOptions } from \"../../hooks/useSetNavigationOptions\";\r\n\r\nexport const Login = () => {\r\n    const navigation = useNavigation();\r\n    const [loading, setLoading] = React.useState(false);\r\n    const [error, setError] = React.useState(false);\r\n    const [errorMessage, setErrorMessage] = React.useState(\"\");\r\n    const { state, handleChange, handleSubmit } = useLogin();\r\n    const { setToken } = useAuth();\r\n    useSetNavigationOptions(\"Login\");\r\n\r\n    const handlePressSubmit = async () => {\r\n      try {\r\n        setLoading(true);\r\n\r\n        const data = await handleSubmit();\r\n        if(data.login.ok){\r\n        setToken(data.login.user?.token);\r\n        //navigation.replace(\"Home\", { user });\r\n        }\r\n        else {\r\n        setErrorMessage(data.login.error);\r\n        setError(!data.login.ok);\r\n        }\r\n\r\n        setLoading(false);\r\n      } \r\n      catch (error) {\r\n        setErrorMessage(\"Oh snap! You got an error!\" + \" \" + error);\r\n        setError(true);\r\n      }\r\n  };\r\n\r\n  return <Layout loading={loading} errorMessage={errorMessage} error={error} state={state} handleChange={handleChange} navigation={navigation} handlePressSubmit={handlePressSubmit} />;\r\n}"]},"metadata":{},"sourceType":"module"}