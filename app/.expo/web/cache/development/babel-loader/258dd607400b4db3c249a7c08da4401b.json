{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Fido\\\\Documents\\\\GitHub\\\\UI-Design-React\\\\app\\\\screens\\\\Login\\\\index.tsx\";\nimport * as React from \"react\";\nimport { Layout } from \"./Layout\";\nimport { useLogin } from \"./hooks/useLogin\";\nimport { useAuth } from \"../../hooks/useAuth\";\nimport { useSetNavigationOptions } from \"../../hooks/useSetNavigationOptions\";\nimport { useAlert } from \"../../hooks/useAlert\";\nexport var Login = function Login(_ref) {\n  var navigation = _ref.navigation;\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var _useLogin = useLogin(),\n      state = _useLogin.state,\n      handleChange = _useLogin.handleChange,\n      handleSubmit = _useLogin.handleSubmit;\n\n  var _useAuth = useAuth(),\n      token = _useAuth.token,\n      setToken = _useAuth.setToken;\n\n  useSetNavigationOptions(\"Login\", false);\n\n  var handlePressSubmit = function handlePressSubmit() {\n    var data, _data$login$user;\n\n    return _regeneratorRuntime.async(function handlePressSubmit$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            setLoading(true);\n            _context.next = 4;\n            return _regeneratorRuntime.awrap(handleSubmit());\n\n          case 4:\n            data = _context.sent;\n\n            if (data.login.ok) {\n              setToken((_data$login$user = data.login.user) == null ? void 0 : _data$login$user.token);\n              navigation.goBack();\n            } else {\n              useAlert({\n                titleError: data.login.error,\n                errorMessage: \"Password or username incorrect\"\n              });\n            }\n\n            setLoading(false);\n            _context.next = 12;\n            break;\n\n          case 9:\n            _context.prev = 9;\n            _context.t0 = _context[\"catch\"](0);\n            useAlert({\n              titleError: \"Oh snap! You got an error!\",\n              errorMessage: _context.t0\n            });\n\n          case 12:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 9]], Promise);\n  };\n\n  return React.createElement(Layout, {\n    loading: loading,\n    state: state,\n    handleChange: handleChange,\n    navigation: navigation,\n    handlePressSubmit: handlePressSubmit,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 10\n    }\n  });\n};","map":{"version":3,"sources":["C:/Users/Fido/Documents/GitHub/UI-Design-React/app/screens/Login/index.tsx"],"names":["React","Layout","useLogin","useAuth","useSetNavigationOptions","useAlert","Login","navigation","useState","loading","setLoading","state","handleChange","handleSubmit","token","setToken","handlePressSubmit","data","login","ok","user","goBack","titleError","error","errorMessage"],"mappings":";;;AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AACA,SAASC,MAAT;AACA,SAASC,QAAT;AACA,SAASC,OAAT;AACA,SAASC,uBAAT;AACA,SAASC,QAAT;AAEA,OAAO,IAAMC,KAAK,GAAG,SAARA,KAAQ,OAAoB;AAAA,MAAjBC,UAAiB,QAAjBA,UAAiB;;AAAA,wBACTP,KAAK,CAACQ,QAAN,CAAe,KAAf,CADS;AAAA;AAAA,MAChCC,OADgC;AAAA,MACvBC,UADuB;;AAAA,kBAEOR,QAAQ,EAFf;AAAA,MAE/BS,KAF+B,aAE/BA,KAF+B;AAAA,MAExBC,YAFwB,aAExBA,YAFwB;AAAA,MAEVC,YAFU,aAEVA,YAFU;;AAAA,iBAGXV,OAAO,EAHI;AAAA,MAG/BW,KAH+B,YAG/BA,KAH+B;AAAA,MAGxBC,QAHwB,YAGxBA,QAHwB;;AAIvCX,EAAAA,uBAAuB,CAAC,OAAD,EAAU,KAAV,CAAvB;;AAEA,MAAMY,iBAAiB,GAAG,SAApBA,iBAAoB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEtBN,YAAAA,UAAU,CAAC,IAAD,CAAV;AAFsB;AAAA,6CAIHG,YAAY,EAJT;;AAAA;AAIhBI,YAAAA,IAJgB;;AAKtB,gBAAIA,IAAI,CAACC,KAAL,CAAWC,EAAf,EAAmB;AACfJ,cAAAA,QAAQ,qBAACE,IAAI,CAACC,KAAL,CAAWE,IAAZ,qBAAC,iBAAiBN,KAAlB,CAAR;AACAP,cAAAA,UAAU,CAACc,MAAX;AACH,aAHD,MAIK;AACDhB,cAAAA,QAAQ,CAAC;AAACiB,gBAAAA,UAAU,EAAEL,IAAI,CAACC,KAAL,CAAWK,KAAxB;AAA+BC,gBAAAA,YAAY,EAAE;AAA7C,eAAD,CAAR;AACH;;AAEDd,YAAAA,UAAU,CAAC,KAAD,CAAV;AAbsB;AAAA;;AAAA;AAAA;AAAA;AAgBtBL,YAAAA,QAAQ,CAAC;AAACiB,cAAAA,UAAU,EAAE,4BAAb;AAA2CE,cAAAA,YAAY;AAAvD,aAAD,CAAR;;AAhBsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA1B;;AAoBA,SAAO,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEf,OAAjB;AAA0B,IAAA,KAAK,EAAEE,KAAjC;AAAwC,IAAA,YAAY,EAAEC,YAAtD;AAAoE,IAAA,UAAU,EAAEL,UAAhF;AAA4F,IAAA,iBAAiB,EAAES,iBAA/G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAP;AACD,CA3BM","sourcesContent":["import * as React from \"react\";\r\nimport { Layout } from './Layout';\r\nimport { useLogin } from \"./hooks/useLogin\";\r\nimport { useAuth } from \"../../hooks/useAuth\";\r\nimport { useSetNavigationOptions } from \"../../hooks/useSetNavigationOptions\";\r\nimport { useAlert } from \"../../hooks/useAlert\";\r\n\r\nexport const Login = ({ navigation }) => {\r\n  const [loading, setLoading] = React.useState(false);\r\n  const { state, handleChange, handleSubmit } = useLogin();\r\n  const { token, setToken } = useAuth();\r\n  useSetNavigationOptions(\"Login\", false);\r\n\r\n  const handlePressSubmit = async () => {\r\n    try {\r\n      setLoading(true);\r\n\r\n      const data = await handleSubmit();\r\n      if (data.login.ok) {\r\n          setToken(data.login.user?.token);\r\n          navigation.goBack();\r\n      }\r\n      else {\r\n          useAlert({titleError: data.login.error, errorMessage: \"Password or username incorrect\"});\r\n      }\r\n\r\n      setLoading(false);\r\n    } \r\n    catch (error) {\r\n      useAlert({titleError: \"Oh snap! You got an error!\", errorMessage: error});\r\n    }\r\n  };\r\n  \r\n  return <Layout loading={loading} state={state} handleChange={handleChange} navigation={navigation} handlePressSubmit={handlePressSubmit} />;\r\n}"]},"metadata":{},"sourceType":"module"}